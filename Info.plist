import SwiftUI
import AppKit

extension Notification.Name {
    static let togglePalette = Notification.Name("dev.seeker.togglePalette")
}

@main
struct SeekerApp: App {
    @NSApplicationDelegateAdaptor(AppDelegate.self) var appDelegate

    var body: some Scene {
        // We manage our own AppKit window; keep SwiftUI window hidden
        WindowGroup { EmptyView() }
            .windowStyle(.hiddenTitleBar)
        Settings {
            Text("Seeker Preferences").padding()
        }
        .commands {
            CommandMenu("Seeker") {
                Button("Command Paletteâ€¦") {
                    NotificationCenter.default.post(name: .togglePalette, object: nil)
                }
                .keyboardShortcut("k", modifiers: .command)
            }
        }
    }
}

final class AppDelegate: NSObject, NSApplicationDelegate {
    private var wc: LinearWindowController!

    func applicationDidFinishLaunching(_ notification: Notification) {
        NSApp.appearance = NSAppearance(named: .darkAqua)
        let root = SeekerRootViewController()
        wc = LinearWindowController(content: root)
        wc.showWindow(self)
    }
}
